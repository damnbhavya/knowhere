@import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Archivo+Black&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }

  /* Fix for mobile viewport height issues */
  html, body {
    height: 100%;
    overflow: hidden;
  }

  body {
    @apply text-gray-900 dark:text-white transition-colors duration-200;
    background: linear-gradient(135deg, #1e3a8a 0%, #1f2937 50%, #000000 100%);
    background-attachment: fixed;
    min-height: 100vh;
    /* Mobile-specific viewport height fixes */
    min-height: 100dvh; /* Dynamic viewport height for mobile */
    height: 100dvh;
  }

  body.dark {
    background: linear-gradient(135deg, #1e3a8a 0%, #1f2937 50%, #000000 100%);
    background-attachment: fixed;
  }

  /* Ensure the root element takes full height */
  #root {
    height: 100%;
    overflow: hidden;
  }
}

@layer components {
  /* Liquid Glass Chat Bubble Styles */
  .chat-message {
    @apply px-4 py-2 rounded-3xl max-w-xs sm:max-w-lg lg:max-w-2xl break-words relative;
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .chat-message.user {
    @apply ml-auto text-white;
    background: linear-gradient(135deg,
      rgba(59, 130, 246, 0.8) 0%,
      rgba(37, 99, 235, 0.9) 50%,
      rgba(29, 78, 216, 0.8) 100%);
    border: 1px solid rgba(96, 165, 250, 0.3);
    box-shadow:
      0 8px 32px rgba(59, 130, 246, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  .chat-message.assistant {
    @apply mr-auto text-gray-900 dark:text-white;
    background: linear-gradient(135deg,
      rgba(255, 255, 255, 0.25) 0%,
      rgba(255, 255, 255, 0.15) 50%,
      rgba(255, 255, 255, 0.1) 100%);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow:
      0 8px 32px rgba(0, 0, 0, 0.05),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  .dark .chat-message.assistant {
    background: linear-gradient(135deg,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0.05) 50%,
      rgba(255, 255, 255, 0.02) 100%);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  /* Glass Panel Styles */
  .glass-panel {
    @apply backdrop-blur-xl border-0 shadow-2xl rounded-3xl;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow:
      0 20px 60px rgba(0, 0, 0, 0.05),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  .dark .glass-panel {
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow:
      0 20px 60px rgba(0, 0, 0, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  /* Sidebar Item Styles */
  .sidebar-item {
    @apply p-3 rounded-full cursor-pointer transition-all duration-300;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
  }

  .sidebar-item:hover {
    background: rgba(255, 255, 255, 0.2);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.05);
  }

  .sidebar-item.active {
    background: linear-gradient(135deg,
      rgba(59, 130, 246, 0.3) 0%,
      rgba(37, 99, 235, 0.2) 100%);
    border: 1px solid rgba(59, 130, 246, 0.3);
    box-shadow:
      0 8px 32px rgba(59, 130, 246, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  /* Button Styles */
  .glass-button {
    @apply rounded-full transition-all duration-300 backdrop-blur-lg;
    background: rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow:
      0 4px 16px rgba(0, 0, 0, 0.05),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  .glass-button:hover {
    background: rgba(255, 255, 255, 0.25);
    box-shadow:
      0 8px 32px rgba(0, 0, 0, 0.08),
      inset 0 1px 0 rgba(255, 255, 255, 0.4);
  }

  .primary-glass-button {
    @apply rounded-full transition-all duration-300 backdrop-blur-lg text-white;
    background: linear-gradient(135deg,
      rgba(59, 130, 246, 0.8) 0%,
      rgba(37, 99, 235, 0.9) 100%);
    border: 1px solid rgba(96, 165, 250, 0.3);
    box-shadow:
      0 4px 16px rgba(59, 130, 246, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  .primary-glass-button:hover {
    background: linear-gradient(135deg,
      rgba(59, 130, 246, 0.9) 0%,
      rgba(37, 99, 235, 1) 100%);
    box-shadow:
      0 8px 32px rgba(59, 130, 246, 0.2),
      inset 0 1px 0 rgba(255, 255, 255, 0.4);
  }

  /* Input Styles */
  .glass-input {
    @apply rounded-full backdrop-blur-lg transition-all duration-300;
    background: linear-gradient(135deg,
      rgba(255, 255, 255, 0.15) 0%,
      rgba(255, 255, 255, 0.1) 50%,
      rgba(255, 255, 255, 0.05) 100%);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow:
      0 8px 32px rgba(0, 0, 0, 0.05),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  .glass-input:focus {
    @apply outline-none;
    background: linear-gradient(135deg,
      rgba(255, 255, 255, 0.2) 0%,
      rgba(255, 255, 255, 0.15) 50%,
      rgba(255, 255, 255, 0.1) 100%);
    border: 1px solid rgba(59, 130, 246, 0.4);
    box-shadow:
      0 8px 32px rgba(59, 130, 246, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }
}

/* App Name Styling */
.app-name {
  font-family: 'Archivo Black', sans-serif;
  font-weight: 900;
  letter-spacing: 0.5px;
}

/* Hide Scrollbar */
.hide-scrollbar {
  -ms-overflow-style: none;  /* Internet Explorer 10+ */
  scrollbar-width: none;  /* Firefox */
}

.hide-scrollbar::-webkit-scrollbar {
  display: none;  /* Safari and Chrome */
}

/* Markdown Styling for Chat Messages */
.chat-message .prose {
  @apply text-white;
}

.chat-message .prose h1,
.chat-message .prose h2,
.chat-message .prose h3,
.chat-message .prose h4,
.chat-message .prose h5,
.chat-message .prose h6 {
  @apply text-white font-semibold;
}

.chat-message .prose code {
  @apply text-blue-200 bg-black/30;
}

.chat-message .prose pre {
  @apply bg-black/40 border-white/20;
}

.chat-message .prose pre code {
  @apply text-gray-100 bg-transparent;
}

.chat-message .prose blockquote {
  @apply border-l-blue-300 text-white/90;
}

.chat-message .prose strong {
  @apply text-white font-semibold;
}

.chat-message .prose table {
  @apply text-white/90;
}

.chat-message .prose th {
  @apply bg-white/20 text-white font-semibold;
}

.chat-message .prose td {
  @apply text-white/80;
}

/* Override prose defaults for better dark theme */
.chat-message .prose ul li::marker,
.chat-message .prose ol li::marker {
  @apply text-white/70;
}

/* Mobile viewport utilities */
@supports (height: 100dvh) {
  .mobile-screen {
    height: 100dvh;
    max-height: 100dvh;
  }
}

@supports not (height: 100dvh) {
  .mobile-screen {
    height: 100vh;
    max-height: 100vh;
  }
}

/* Ensure proper scrolling behavior on mobile */
@media screen and (max-width: 768px) {
  body {
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Fix iOS Safari viewport issues */
  .mobile-safe-area {
    height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
    max-height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom));
  }
  
  /* Prevent zoom on input focus */
  input[type="text"], 
  input[type="email"], 
  input[type="password"], 
  textarea {
    font-size: 16px !important;
  }
  
  /* Smooth transitions for keyboard appearance */
  .chat-container {
    transition: height 0.2s ease-in-out;
  }
}